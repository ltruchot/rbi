{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/bank_accesses.coffee","app/collections/bank_accounts.coffee","app/collections/bank_alerts.coffee","app/collections/bank_amounts.coffee","app/collections/bank_operations.coffee","app/collections/banks.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/bank.coffee","app/models/bank_access.coffee","app/models/bank_account.coffee","app/models/bank_alert.coffee","app/models/bank_amount.coffee","app/models/bank_operation.coffee","app/router.coffee","app/views/app.coffee","app/views/bank_subtitle.coffee","app/views/bank_title.coffee","app/views/configuration.coffee","app/views/configuration_bank.coffee","app/views/new_bank.coffee","app/views/templates/app.jade","app/views/templates/configuration.jade","app/views/templates/configuration_bank.jade","app/views/templates/configuration_bank_subtitle.jade","app/views/templates/configuration_bank_title.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1KA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A","sourcesContent":["var AppView, BankAmountsCollection, BankOperationsCollection, BanksCollection;\n\nAppView = require('views/app');\n\nBanksCollection = require('collections/banks');\n\nBankOperationsCollection = require('collections/bank_operations');\n\nBankAmountsCollection = require('collections/bank_amounts');\n\nmodule.exports = {\n  initialize: function() {\n    return this.step2();\n  },\n  step2: function() {\n    var Router;\n    window.collections = {};\n    window.views = {};\n    window.collections.allBanks = new BanksCollection();\n    window.collections.banks = new BanksCollection();\n    window.collections.operations = new BankOperationsCollection();\n    window.collections.amounts = new BankAmountsCollection();\n    window.rbiColors = {\n      border_color: \"#efefef\",\n      grid_color: \"#ddd\",\n      default_black: \"#666\",\n      green: \"#8ecf67\",\n      yellow: \"#fac567\",\n      orange: \"#F08C56\",\n      blue: \"#87ceeb\",\n      red: \"#f74e4d\",\n      teal: \"#28D8CA\",\n      grey: \"#999999\"\n    };\n    /*\n            views\n    */\n\n    window.views.appView = new AppView();\n    window.views.appView.render();\n    window.activeObjects = {};\n    _.extend(window.activeObjects, Backbone.Events);\n    Router = require('router');\n    this.router = new Router();\n    if (typeof Object.freeze === 'function') {\n      return Object.freeze(this);\n    }\n  }\n};\n","var BankAccess, BankAccesses, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccess = require('../models/bank_access');\n\nmodule.exports = BankAccesses = (function(_super) {\n  __extends(BankAccesses, _super);\n\n  function BankAccesses() {\n    _ref = BankAccesses.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccesses.prototype.model = BankAccess;\n\n  BankAccesses.prototype.url = \"bankaccesses\";\n\n  return BankAccesses;\n\n})(Backbone.Collection);\n","var BankAccount, BankAccounts,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccount = require('../models/bank_account');\n\nmodule.exports = BankAccounts = (function(_super) {\n  __extends(BankAccounts, _super);\n\n  BankAccounts.prototype.model = BankAccount;\n\n  BankAccounts.prototype.url = \"bankaccounts\";\n\n  function BankAccounts(bank) {\n    this.bank = bank;\n    this.url = \"banks/getAccounts/\" + this.bank.get(\"id\");\n    BankAccounts.__super__.constructor.call(this);\n  }\n\n  BankAccounts.prototype.getSum = function() {\n    var account, sum, _i, _len, _ref;\n    sum = 0;\n    _ref = this.models;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      account = _ref[_i];\n      sum += Number(account.get(\"amount\"));\n    }\n    return sum;\n  };\n\n  return BankAccounts;\n\n})(Backbone.Collection);\n","var BankAlert, BankAlerts, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAlert = require('../models/bank_alert');\n\nmodule.exports = BankAlerts = (function(_super) {\n  __extends(BankAlerts, _super);\n\n  function BankAlerts() {\n    _ref = BankAlerts.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAlerts.prototype.model = BankAlert;\n\n  BankAlerts.prototype.url = \"bankalerts\";\n\n  return BankAlerts;\n\n})(Backbone.Collection);\n","var BankAmount, BankAmounts, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAmount = require('../models/bank_amount');\n\nmodule.exports = BankAmounts = (function(_super) {\n  __extends(BankAmounts, _super);\n\n  function BankAmounts() {\n    _ref = BankAmounts.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAmounts.prototype.model = BankAmount;\n\n  BankAmounts.prototype.url = \"bankaccounts\";\n\n  BankAmounts.prototype.setAccount = function(account) {\n    this.account = account;\n    return this.url = \"bankaccounts/getLastYearAmounts/\" + this.account.get(\"id\");\n  };\n\n  return BankAmounts;\n\n})(Backbone.Collection);\n","var BankOperation, BankOperations, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankOperation = require('../models/bank_operation');\n\nmodule.exports = BankOperations = (function(_super) {\n  __extends(BankOperations, _super);\n\n  function BankOperations() {\n    _ref = BankOperations.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankOperations.prototype.model = BankOperation;\n\n  BankOperations.prototype.url = \"bankoperations\";\n\n  BankOperations.prototype.order = \"asc\";\n\n  BankOperations.prototype.orderBy = \"date\";\n\n  BankOperations.prototype.setAccount = function(account) {\n    this.account = account;\n    return this.url = \"bankaccounts/getOperations/\" + this.account.get(\"id\");\n  };\n\n  BankOperations.prototype.setComparator = function(type) {\n    var _this = this;\n    if (type === \"date\") {\n      return this.comparator = function(o1, o2) {\n        var d1, d2, sort, t1, t2;\n        d1 = new Date(o1.get(\"date\")).getTime();\n        d2 = new Date(o2.get(\"date\")).getTime();\n        t1 = o1.get(\"title\");\n        t2 = o2.get(\"title\");\n        sort = _this.order === \"asc\" ? -1 : 1;\n        if (d1 === d2) {\n          if (t1 > t2) {\n            return sort;\n          }\n          if (t1 < t2) {\n            return -sort;\n          }\n          return 0;\n        } else if (d1 > d2) {\n          return sort;\n        } else {\n          return -sort;\n        }\n      };\n    } else {\n      this.orderBy = type;\n      return this.comparator = function(o1, o2) {\n        var sort, t1, t2;\n        t1 = o1.get(this.orderBy);\n        t2 = o2.get(this.orderBy);\n        sort = this.order === \"asc\" ? -1 : 1;\n        if (t1 === t2) {\n          return 0;\n        } else if (t1 > t2) {\n          return sort;\n        } else {\n          return -sort;\n        }\n      };\n    }\n  };\n\n  BankOperations.prototype.toggleSort = function(order) {\n    if (this.orderBy === order) {\n      return this.order = this.order === \"asc\" ? \"desc\" : \"asc\";\n    } else {\n      return this.orderBy = order;\n    }\n  };\n\n  return BankOperations;\n\n})(Backbone.Collection);\n","var Bank, Banks, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBank = require('../models/bank');\n\nmodule.exports = Banks = (function(_super) {\n  __extends(Banks, _super);\n\n  function Banks() {\n    _ref = Banks.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Banks.prototype.model = Bank;\n\n  Banks.prototype.url = \"banks\";\n\n  Banks.prototype.getSum = function() {\n    var bank, sum, _i, _len, _ref1;\n    sum = 0;\n    _ref1 = this.models;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      bank = _ref1[_i];\n      sum += Number(bank.get(\"amount\"));\n    }\n    return sum;\n  };\n\n  return Banks;\n\n})(Backbone.Collection);\n","var app;\n\napp = require('application');\n\n$(function() {\n  require('lib/app_helpers');\n  return app.initialize();\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, _results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception,\\\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\\\n                   profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    _results = [];\n    while (method = methods.pop()) {\n      _results.push(console[method] = console[method] || dummy);\n    }\n    return _results;\n  })();\n})();\n\nNumber.prototype.formatMoney = function(decPlaces, thouSeparator, decSeparator) {\n  var i, j, n, sign;\n  n = this;\n  decPlaces = (isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces);\n  decSeparator = (decSeparator === undefined ? \".\" : decSeparator);\n  thouSeparator = (thouSeparator === undefined ? \",\" : thouSeparator);\n  sign = (n < 0 ? \"-\" : \"\");\n  i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + \"\";\n  j = ((j = i.length) > 3 ? j % 3 : 0);\n  return sign + (j ? i.substr(0, j) + thouSeparator : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : \"\");\n};\n\nNumber.prototype.money = function() {\n  return this.formatMoney(2, \" \", \",\");\n};\n\nDate.prototype.dateString = function() {\n  var addZeros, myDate;\n  addZeros = function(num) {\n    if (Number(num) < 10) {\n      return \"0\" + num;\n    } else {\n      return num;\n    }\n  };\n  myDate = this;\n  return addZeros(myDate.getDate() + 1) + \"/\" + addZeros(myDate.getMonth() + 1) + \"/\" + myDate.getFullYear();\n};\n\nDate.prototype.timeString = function() {\n  var addZeros, myDate;\n  addZeros = function(num) {\n    if (Number(num) < 10) {\n      return \"0\" + num;\n    } else {\n      return num;\n    }\n  };\n  myDate = this;\n  return addZeros(myDate.getHours()) + \":\" + addZeros(myDate.getMinutes());\n};\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    return {\n      model: this.model\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);\n    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.append(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    var collectionEl;\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      return collectionEl = el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n    this.$collectionEl = $(this.collectionEl);\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var Bank, BankAccountsCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccountsCollection = require('../collections/bank_accounts');\n\nmodule.exports = Bank = (function(_super) {\n  __extends(Bank, _super);\n\n  function Bank() {\n    _ref = Bank.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Bank.prototype.defaults = {\n    amount: 0\n  };\n\n  Bank.prototype.checked = true;\n\n  Bank.prototype.initialize = function() {\n    this.accounts = new BankAccountsCollection(this);\n    this.listenTo(this.accounts, \"add\", this.updateAmount);\n    this.listenTo(this.accounts, \"remove\", this.updateAmount);\n    this.listenTo(this.accounts, \"destroy\", this.updateAmount);\n    return this.listenTo(this.accounts, \"change\", this.updateAmount);\n  };\n\n  Bank.prototype.updateAmount = function() {\n    this.set(\"amount\", this.accounts.getSum());\n    return console.log(\"updated balance bank \" + this.get(\"name\") + \" is now \" + this.get(\"amount\"));\n  };\n\n  return Bank;\n\n})(Backbone.Model);\n","var BankAccess, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankAccess = (function(_super) {\n  __extends(BankAccess, _super);\n\n  function BankAccess() {\n    _ref = BankAccess.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccess.prototype.url = \"bankaccesses\";\n\n  return BankAccess;\n\n})(Backbone.Model);\n","var BankAccount, BankOperationsCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankOperationsCollection = require('../collections/bank_operations');\n\nmodule.exports = BankAccount = (function(_super) {\n  __extends(BankAccount, _super);\n\n  function BankAccount() {\n    _ref = BankAccount.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccount.prototype.checked = true;\n\n  return BankAccount;\n\n})(Backbone.Model);\n","var BankAlert, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankAlert = (function(_super) {\n  __extends(BankAlert, _super);\n\n  function BankAlert() {\n    _ref = BankAlert.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAlert.prototype.url = \"bankalerts\";\n\n  return BankAlert;\n\n})(Backbone.Model);\n","var BankAmount, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankAmount = (function(_super) {\n  __extends(BankAmount, _super);\n\n  function BankAmount() {\n    _ref = BankAmount.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  return BankAmount;\n\n})(Backbone.Model);\n","var BankOperation, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankOperation = (function(_super) {\n  __extends(BankOperation, _super);\n\n  function BankOperation() {\n    _ref = BankOperation.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  return BankOperation;\n\n})(Backbone.Model);\n","var AppView, Router, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nAppView = require('views/app');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Router.prototype.routes = {\n    '': 'parametres'\n  };\n\n  Router.prototype.parametres = function() {\n    var _ref1;\n    return (_ref1 = window.views.configurationView) != null ? _ref1.render() : void 0;\n  };\n\n  return Router;\n\n})(Backbone.Router);\n","var AppView, BaseView, ConfigurationView, NewBankView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nConfigurationView = require('views/configuration');\n\nNewBankView = require('views/new_bank');\n\nmodule.exports = AppView = (function(_super) {\n  __extends(AppView, _super);\n\n  function AppView() {\n    _ref = AppView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  AppView.prototype.template = require('./templates/app');\n\n  AppView.prototype.el = 'body.application';\n\n  AppView.prototype.afterRender = function() {\n    return window.collections.banks.fetch({\n      data: {\n        withAccountOnly: true\n      },\n      success: function() {\n        return window.collections.allBanks.fetch({\n          success: function() {\n            if (!this.newbankView) {\n              this.newbankView = new NewBankView();\n            }\n            if (!window.views.configurationView) {\n              window.views.configurationView = new ConfigurationView();\n            }\n            this.newbankView.render();\n            return Backbone.history.start();\n          },\n          error: function() {\n            return console.log(\"Fatal error: could not get the banks list\");\n          }\n        });\n      }\n    });\n  };\n\n  return AppView;\n\n})(BaseView);\n","var BankSubTitleView, BaseView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = BankSubTitleView = (function(_super) {\n  __extends(BankSubTitleView, _super);\n\n  BankSubTitleView.prototype.template = require('./templates/configuration_bank_subtitle');\n\n  function BankSubTitleView(model) {\n    this.model = model;\n    BankSubTitleView.__super__.constructor.call(this);\n  }\n\n  BankSubTitleView.prototype.events = {\n    \"change .accountTitle\": 'chooseAccount'\n  };\n\n  BankSubTitleView.prototype.initialize = function() {\n    this.listenTo(this.model, 'change', this.render);\n    return this.listenTo(window.activeObjects, 'changeActiveAccount', this.checkActive);\n  };\n\n  BankSubTitleView.prototype.chooseAccount = function(event) {\n    var today;\n    window.activeObjects.trigger(\"changeActiveAccount\", this.model);\n    today = this.formatDate(new Date());\n    $(\"#current-amount-date\").text(today);\n    $(\"#account-amount-balance\").text($(event.currentTarget).parent().children('input.accountAmount').val());\n    return this.loadLastYearAmounts(this.model);\n  };\n\n  BankSubTitleView.prototype.checkActive = function(account) {\n    this.$(\".row\").removeClass(\"active\");\n    if (account === this.model) {\n      return this.$(\".row\").addClass(\"active\");\n    }\n  };\n\n  BankSubTitleView.prototype.loadLastYearAmounts = function(account) {\n    var _this = this;\n    window.collections.amounts.reset();\n    window.collections.amounts.setAccount(account);\n    window.collections.amounts.fetch({\n      success: function(amounts) {\n        _this.setupLastYearAmountsFlot(amounts);\n        return $(window).resize(function() {\n          return _this.setupLastYearAmountsFlot(amounts);\n        });\n      },\n      error: function() {\n        return console.log(\"error fetching amounts of last year\");\n      }\n    });\n    return this;\n  };\n\n  BankSubTitleView.prototype.formatDate = function(date) {\n    var day, month, year;\n    day = ('0' + date.getDate()).slice(-2);\n    month = ('0' + (date.getMonth() + 1)).slice(-2);\n    year = date.getFullYear();\n    return day + '/' + month + '/' + year;\n  };\n\n  BankSubTitleView.prototype.setupLastYearAmountsFlot = function(amounts) {\n    var currentDate, dayRatio, daysPerMonth, flotReadyAmounts, formattedAmounts, i, lastAmount, maxAmount, minAmount, numberOfDays, plot, sixMonthAgo, threeMonthAgo;\n    formattedAmounts = [];\n    flotReadyAmounts = [];\n    daysPerMonth = {\n      twelve: 365,\n      six: 365 / 2,\n      three: 365 / 4\n    };\n    numberOfDays = daysPerMonth.three;\n    threeMonthAgo = new Date();\n    threeMonthAgo = threeMonthAgo.setMonth(threeMonthAgo.getMonth() - 3);\n    sixMonthAgo = new Date();\n    sixMonthAgo = sixMonthAgo.setMonth(sixMonthAgo.getMonth() - 6);\n    dayRatio = 4;\n    amounts.each(function(amount) {\n      var amountDate, currentDate, i;\n      currentDate = new Date();\n      currentDate.setHours(12, 0, 0, 0);\n      amountDate = new Date(amount.get('date'));\n      i = 0;\n      while (amountDate.getTime() !== currentDate.getTime() && i < 365) {\n        currentDate.setDate(currentDate.getDate() - 1);\n        i++;\n      }\n      if (i < 364) {\n        formattedAmounts[currentDate.getTime()] = amount.get('amount');\n      }\n      if (currentDate.getTime() < threeMonthAgo) {\n        return numberOfDays = daysPerMonth.six;\n      } else if (currentDate.getTime() < sixMonthAgo) {\n        return numberOfDays = daysPerMonth.twelve;\n      }\n    });\n    currentDate = new Date();\n    currentDate.setHours(12, 0, 0, 0);\n    lastAmount = parseFloat(this.model.get('amount'));\n    minAmount = parseFloat(this.model.get('amount'));\n    maxAmount = parseFloat(this.model.get('amount'));\n    i = 0;\n    while (i < numberOfDays) {\n      if (formattedAmounts[currentDate.getTime()]) {\n        lastAmount = parseFloat(formattedAmounts[currentDate.getTime()]);\n      }\n      flotReadyAmounts.push([currentDate.getTime(), lastAmount]);\n      currentDate.setDate(currentDate.getDate() - 1);\n      if (lastAmount < minAmount) {\n        minAmount = lastAmount;\n      }\n      if (lastAmount > maxAmount) {\n        maxAmount = lastAmount;\n      }\n      i++;\n    }\n    $(\"#max-amount\").text(maxAmount + ' €');\n    $(\"#min-amount\").text(minAmount + ' €');\n    minAmount = minAmount - 500;\n    maxAmount = maxAmount + 500;\n    flotReadyAmounts.reverse();\n    return plot = $.plot(\"#amount-stats\", [\n      {\n        data: flotReadyAmounts,\n        label: \"Solde\"\n      }\n    ], {\n      series: {\n        lines: {\n          show: true,\n          lineWidth: 2\n        },\n        points: {\n          show: false\n        }\n      },\n      grid: {\n        hoverable: true,\n        clickable: true,\n        borderWidth: 1,\n        tickColor: $border_color,\n        borderColor: '#eeeeee'\n      },\n      colors: [window.rbiColors.blue],\n      shadowSize: 0,\n      yaxis: {\n        min: minAmount,\n        max: maxAmount\n      },\n      xaxis: {\n        mode: \"time\",\n        minTickSize: [1, \"month\"],\n        monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']\n      },\n      tooltip: true,\n      tooltipOpts: {\n        content: '%y.2  &euro;<br /> %x',\n        xDateFormat: '%d/%m/%y'\n      }\n    });\n  };\n\n  return BankSubTitleView;\n\n})(BaseView);\n","var BankTitleView, BaseView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = BankTitleView = (function(_super) {\n  __extends(BankTitleView, _super);\n\n  BankTitleView.prototype.template = require('./templates/configuration_bank_title');\n\n  function BankTitleView(model) {\n    this.model = model;\n    BankTitleView.__super__.constructor.call(this);\n  }\n\n  BankTitleView.prototype.initialize = function() {\n    this.listenTo(this.model, 'change', this.update);\n    this.listenTo(this.model.accounts, \"add\", this.update);\n    this.listenTo(this.model.accounts, \"destroy\", this.update);\n    this.listenTo(this.model.accounts, \"request\", this.displayLoading);\n    return this.listenTo(this.model.accounts, \"change\", this.hideLoading);\n  };\n\n  BankTitleView.prototype.displayLoading = function() {\n    return this.$(\".bank-title-loading\").show();\n  };\n\n  BankTitleView.prototype.hideLoading = function() {\n    return this.$(\".bank-title-loading\").hide();\n  };\n\n  BankTitleView.prototype.update = function() {\n    this.model.set(\"amount\", this.model.accounts.getSum());\n    this.$(\".bank-amount\").html(Number(this.model.get('amount')).money());\n    if (this.model.accounts.length === 0) {\n      this.$(\".bank-title\").hide();\n      this.$(\".bank-balance\").hide();\n    } else {\n      this.$(\".bank-title\").show();\n      this.$(\".bank-balance\").show();\n    }\n    return this.$(\".bank-title-loading\").hide();\n  };\n\n  BankTitleView.prototype.render = function() {\n    BankTitleView.__super__.render.call(this);\n    this.update();\n    return this;\n  };\n\n  return BankTitleView;\n\n})(BaseView);\n","var BaseView, ConfigurationBankView, ConfigurationView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nConfigurationBankView = require('./configuration_bank');\n\nmodule.exports = ConfigurationView = (function(_super) {\n  __extends(ConfigurationView, _super);\n\n  function ConfigurationView() {\n    _ref = ConfigurationView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ConfigurationView.prototype.template = require('./templates/configuration');\n\n  ConfigurationView.prototype.el = 'div#content';\n\n  ConfigurationView.prototype.elAccounts = 'ul#account-choice';\n\n  ConfigurationView.prototype.accounts = 0;\n\n  ConfigurationView.prototype.subViews = [];\n\n  ConfigurationView.prototype.initialize = function() {\n    return this.listenTo(window.activeObjects, \"new_access_added_successfully\", this.noMoreEmpty);\n  };\n\n  ConfigurationView.prototype.noMoreEmpty = function() {\n    var _this = this;\n    return window.collections.banks.fetch({\n      success: function() {\n        return _this.render();\n      }\n    });\n  };\n\n  ConfigurationView.prototype.render = function() {\n    var treatment, view;\n    ConfigurationView.__super__.render.call(this);\n    view = this;\n    treatment = function(bank, callback) {\n      var viewBank;\n      viewBank = new ConfigurationBankView(bank);\n      view.subViews.push(viewBank);\n      $(view.elAccounts).append(viewBank.el);\n      return bank.accounts.fetch({\n        success: function(col) {\n          callback(null, col.length);\n          if (col.length > 0) {\n            return viewBank.render();\n          }\n        },\n        error: function(col, err, opts) {\n          callback(null, col.length);\n          return viewBank.$el.html(\"\");\n        }\n      });\n    };\n    async.concat(window.collections.banks.models, treatment, function(err, results) {\n      if (err) {\n        console.log(err);\n        alert(window.i18n(\"error_loading_accounts\"));\n      }\n      this.accounts = results.length;\n      return $(\".accountTitle:eq(0)\").click();\n    });\n    return this;\n  };\n\n  ConfigurationView.prototype.empty = function() {\n    var view, _i, _len, _ref1, _ref2, _results;\n    if ((_ref1 = this.operationsView) != null) {\n      _ref1.destroy();\n    }\n    _ref2 = this.subViews;\n    _results = [];\n    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n      view = _ref2[_i];\n      _results.push(view.destroy());\n    }\n    return _results;\n  };\n\n  return ConfigurationView;\n\n})(BaseView);\n","var BankSubTitleView, BankTitleView, BaseView, ConfigurationBankView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nBankTitleView = require('./bank_title');\n\nBankSubTitleView = require('./bank_subtitle');\n\nmodule.exports = ConfigurationBankView = (function(_super) {\n  __extends(ConfigurationBankView, _super);\n\n  ConfigurationBankView.prototype.sum = 0;\n\n  ConfigurationBankView.prototype.subViews = [];\n\n  function ConfigurationBankView(bank) {\n    this.bank = bank;\n    ConfigurationBankView.__super__.constructor.call(this);\n  }\n\n  ConfigurationBankView.prototype.initialize = function() {\n    this.listenTo(this.bank.accounts, \"add\", this.addOne);\n    return this.listenTo(this.bank.accounts, \"destroy\", this.render);\n  };\n\n  ConfigurationBankView.prototype.addOne = function(account) {\n    var viewAccount;\n    viewAccount = new BankSubTitleView(account);\n    this.subViews.push(viewAccount);\n    account.view = viewAccount;\n    return this.$el.append(viewAccount.render().el);\n  };\n\n  ConfigurationBankView.prototype.render = function() {\n    var account, _i, _len, _ref;\n    this.viewTitle = new BankTitleView(this.bank);\n    this.$el.html(this.viewTitle.render().el);\n    this.viewTitle = null;\n    this.sum = 0;\n    _ref = this.bank.accounts.models;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      account = _ref[_i];\n      this.addOne(account);\n    }\n    return this;\n  };\n\n  ConfigurationBankView.prototype.destroy = function() {\n    var view, _i, _len, _ref, _ref1;\n    if ((_ref = this.viewTitle) != null) {\n      _ref.destroy();\n    }\n    _ref1 = this.subViews;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      view = _ref1[_i];\n      view.destroy();\n    }\n    return ConfigurationBankView.__super__.destroy.call(this);\n  };\n\n  return ConfigurationBankView;\n\n})(BaseView);\n","var BankAccessModel, BaseView, NewBankView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nBankAccessModel = require('../models/bank_access');\n\nmodule.exports = NewBankView = (function(_super) {\n  __extends(NewBankView, _super);\n\n  function NewBankView() {\n    _ref = NewBankView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  NewBankView.prototype.el = 'div#add-bank-window';\n\n  NewBankView.prototype.initialize = function() {\n    return this.render();\n  };\n\n  NewBankView.prototype.saveBank = function(event) {\n    var bankAccess, button, data, oldText, view;\n    event.preventDefault();\n    view = this;\n    button = $(event.target);\n    oldText = button.html();\n    button.addClass(\"disabled\");\n    button.html(window.i18n(\"verifying\") + \"<img src='./loader_green.gif' />\");\n    button.removeClass('btn-warning');\n    button.addClass('btn-success');\n    this.$(\".message-modal\").html(\"\");\n    data = {\n      login: $(\"#inputLogin\").val(),\n      password: $(\"#inputPass\").val(),\n      bank: $(\"#inputBank\").val()\n    };\n    bankAccess = new BankAccessModel(data);\n    return bankAccess.save(data, {\n      success: function(model, response, options) {\n        var bank;\n        button.html(window.i18n(\"sent\") + \" <img src='./loader_green.gif' />\");\n        bank = window.collections.allBanks.get(data.bank);\n        if (bank != null) {\n          console.log(\"Fetching for new accounts in bank\" + bank.get(\"name\"));\n          bank.accounts.trigger(\"loading\");\n          bank.accounts.fetch();\n        }\n        $(\"#add-bank-window\").modal(\"hide\");\n        button.removeClass(\"disabled\");\n        button.html(oldText);\n        window.activeObjects.trigger(\"new_access_added_successfully\", model);\n        return setTimeout(function() {\n          var router;\n          $(\"#add-bank-window\").modal(\"hide\");\n          router = window.app.router;\n          return router.navigate('/', {\n            trigger: true,\n            replace: true\n          });\n        }, 500);\n      },\n      error: function(model, xhr, options) {\n        button.removeClass('btn-success');\n        button.removeClass('disabled');\n        button.addClass('btn-warning');\n        if (((xhr != null ? xhr.status : void 0) != null) && xhr.status === 409) {\n          this.$(\".message-modal\").html(\"<div class='alert alert-danger'>\" + window.i18n(\"access already exists\") + \"</div>\");\n          return button.html(window.i18n(\"access already exists button\"));\n        } else {\n          this.$(\".message-modal\").html(\"<div class='alert alert-danger'>\" + window.i18n(\"error_check_credentials\") + \"</div>\");\n          return button.html(window.i18n(\"error_check_credentials_btn\"));\n        }\n      }\n    });\n  };\n\n  NewBankView.prototype.getRenderData = function() {\n    return {\n      banks: window.collections.allBanks.models\n    };\n  };\n\n  return NewBankView;\n\n})(BaseView);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<p>Contenu</p>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"content-box\"><h1>Paramètres</h1><div><ul id=\"account-choice\"></ul></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<input type=\"radio\" name=\"accountTitle\" class=\"accountTitle\"/><label for=\"accountTitle\">' + escape((interp = model.get('title')) == null ? '' : interp) + ' n°' + escape((interp = model.get(\"accountNumber\")) == null ? '' : interp) + '</label><span>&nbsp;Solde :</span><input');\nbuf.push(attrs({ 'type':(\"text\"), 'value':(\"\" + (Number(model.get('amount')).money()) + \"\"), 'disabled':(\"true\"), \"class\": ('accountAmount') }, {\"type\":true,\"value\":true,\"disabled\":true}));\nbuf.push('/><span>&euro;</span>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<span class=\"bank-title-loading\"><img src=\"./loader.gif\"/></span><span class=\"bank-title\">' + escape((interp = model.get('name')) == null ? '' : interp) + '</span>');\n}\nreturn buf.join(\"\");\n};"]}