{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/bank_accesses.coffee","app/collections/bank_accounts.coffee","app/collections/bank_alerts.coffee","app/collections/bank_operations.coffee","app/collections/banks.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/bank.coffee","app/models/bank_access.coffee","app/models/bank_account.coffee","app/models/bank_alert.coffee","app/models/bank_operation.coffee","app/router.coffee","app/views/app_view.coffee","app/views/templates/app.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A","sourcesContent":["var AppView, BankOperationsCollection, BanksCollection;\n\nAppView = require('views/app_view');\n\nBanksCollection = require('collections/banks');\n\nBankOperationsCollection = require('collections/bank_operations');\n\nmodule.exports = {\n  initialize: function() {\n    return this.step2();\n  },\n  step2: function() {\n    var Router;\n    window.collections = {};\n    window.views = {};\n    window.collections.allBanks = new BanksCollection();\n    window.collections.banks = new BanksCollection();\n    window.collections.operations = new BankOperationsCollection();\n    /*\n            views\n    */\n\n    window.views.appView = new AppView();\n    window.views.appView.render();\n    window.activeObjects = {};\n    _.extend(window.activeObjects, Backbone.Events);\n    Router = require('router');\n    this.router = new Router();\n    if (typeof Object.freeze === 'function') {\n      return Object.freeze(this);\n    }\n  }\n};\n","var BankAccess, BankAccesses, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccess = require('../models/bank_access');\n\nmodule.exports = BankAccesses = (function(_super) {\n  __extends(BankAccesses, _super);\n\n  function BankAccesses() {\n    _ref = BankAccesses.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccesses.prototype.model = BankAccess;\n\n  BankAccesses.prototype.url = \"bankaccesses\";\n\n  return BankAccesses;\n\n})(Backbone.Collection);\n","var BankAccount, BankAccounts,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccount = require('../models/bank_account');\n\nmodule.exports = BankAccounts = (function(_super) {\n  __extends(BankAccounts, _super);\n\n  BankAccounts.prototype.model = BankAccount;\n\n  BankAccounts.prototype.url = \"bankaccounts\";\n\n  function BankAccounts(bank) {\n    this.bank = bank;\n    this.url = \"banks/getAccounts/\" + this.bank.get(\"id\");\n    BankAccounts.__super__.constructor.call(this);\n  }\n\n  BankAccounts.prototype.getSum = function() {\n    var account, sum, _i, _len, _ref;\n    sum = 0;\n    _ref = this.models;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      account = _ref[_i];\n      sum += Number(account.get(\"amount\"));\n    }\n    return sum;\n  };\n\n  return BankAccounts;\n\n})(Backbone.Collection);\n","var BankAlert, BankAlerts, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAlert = require('../models/bank_alert');\n\nmodule.exports = BankAlerts = (function(_super) {\n  __extends(BankAlerts, _super);\n\n  function BankAlerts() {\n    _ref = BankAlerts.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAlerts.prototype.model = BankAlert;\n\n  BankAlerts.prototype.url = \"bankalerts\";\n\n  return BankAlerts;\n\n})(Backbone.Collection);\n","var BankOperation, BankOperations, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankOperation = require('../models/bank_operation');\n\nmodule.exports = BankOperations = (function(_super) {\n  __extends(BankOperations, _super);\n\n  function BankOperations() {\n    _ref = BankOperations.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankOperations.prototype.model = BankOperation;\n\n  BankOperations.prototype.url = \"bankoperations\";\n\n  BankOperations.prototype.order = \"asc\";\n\n  BankOperations.prototype.orderBy = \"date\";\n\n  BankOperations.prototype.setAccount = function(account) {\n    this.account = account;\n    return this.url = \"bankaccounts/getOperations/\" + this.account.get(\"id\");\n  };\n\n  BankOperations.prototype.setComparator = function(type) {\n    var _this = this;\n    if (type === \"date\") {\n      return this.comparator = function(o1, o2) {\n        var d1, d2, sort, t1, t2;\n        d1 = new Date(o1.get(\"date\")).getTime();\n        d2 = new Date(o2.get(\"date\")).getTime();\n        t1 = o1.get(\"title\");\n        t2 = o2.get(\"title\");\n        sort = _this.order === \"asc\" ? -1 : 1;\n        if (d1 === d2) {\n          if (t1 > t2) {\n            return sort;\n          }\n          if (t1 < t2) {\n            return -sort;\n          }\n          return 0;\n        } else if (d1 > d2) {\n          return sort;\n        } else {\n          return -sort;\n        }\n      };\n    } else {\n      this.orderBy = type;\n      return this.comparator = function(o1, o2) {\n        var sort, t1, t2;\n        t1 = o1.get(this.orderBy);\n        t2 = o2.get(this.orderBy);\n        sort = this.order === \"asc\" ? -1 : 1;\n        if (t1 === t2) {\n          return 0;\n        } else if (t1 > t2) {\n          return sort;\n        } else {\n          return -sort;\n        }\n      };\n    }\n  };\n\n  BankOperations.prototype.toggleSort = function(order) {\n    if (this.orderBy === order) {\n      return this.order = this.order === \"asc\" ? \"desc\" : \"asc\";\n    } else {\n      return this.orderBy = order;\n    }\n  };\n\n  return BankOperations;\n\n})(Backbone.Collection);\n","var Bank, Banks, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBank = require('../models/bank');\n\nmodule.exports = Banks = (function(_super) {\n  __extends(Banks, _super);\n\n  function Banks() {\n    _ref = Banks.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Banks.prototype.model = Bank;\n\n  Banks.prototype.url = \"banks\";\n\n  Banks.prototype.getSum = function() {\n    var bank, sum, _i, _len, _ref1;\n    sum = 0;\n    _ref1 = this.models;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      bank = _ref1[_i];\n      sum += Number(bank.get(\"amount\"));\n    }\n    return sum;\n  };\n\n  return Banks;\n\n})(Backbone.Collection);\n","var app;\n\napp = require('application');\n\n$(function() {\n  require('lib/app_helpers');\n  return app.initialize();\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, _results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception,\\\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\\\n                   profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    _results = [];\n    while (method = methods.pop()) {\n      _results.push(console[method] = console[method] || dummy);\n    }\n    return _results;\n  })();\n})();\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var _ref1;\n    return {\n      model: (_ref1 = this.model) != null ? _ref1.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);\n    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.append(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    var collectionEl;\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      return collectionEl = el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n    this.$collectionEl = $(this.collectionEl);\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var Bank, BankAccountsCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankAccountsCollection = require('../collections/bank_accounts');\n\nmodule.exports = Bank = (function(_super) {\n  __extends(Bank, _super);\n\n  function Bank() {\n    _ref = Bank.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Bank.prototype.defaults = {\n    amount: 0\n  };\n\n  Bank.prototype.checked = true;\n\n  Bank.prototype.initialize = function() {\n    this.accounts = new BankAccountsCollection(this);\n    this.listenTo(this.accounts, \"add\", this.updateAmount);\n    this.listenTo(this.accounts, \"remove\", this.updateAmount);\n    this.listenTo(this.accounts, \"destroy\", this.updateAmount);\n    return this.listenTo(this.accounts, \"change\", this.updateAmount);\n  };\n\n  Bank.prototype.updateAmount = function() {\n    this.set(\"amount\", this.accounts.getSum());\n    return console.log(\"updated balance bank \" + this.get(\"name\") + \" is now \" + this.get(\"amount\"));\n  };\n\n  return Bank;\n\n})(Backbone.Model);\n","var BankAccess, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankAccess = (function(_super) {\n  __extends(BankAccess, _super);\n\n  function BankAccess() {\n    _ref = BankAccess.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccess.prototype.url = \"bankaccesses\";\n\n  return BankAccess;\n\n})(Backbone.Model);\n","var BankAccount, BankOperationsCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBankOperationsCollection = require('../collections/bank_operations');\n\nmodule.exports = BankAccount = (function(_super) {\n  __extends(BankAccount, _super);\n\n  function BankAccount() {\n    _ref = BankAccount.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAccount.prototype.checked = true;\n\n  return BankAccount;\n\n})(Backbone.Model);\n","var BankAlert, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankAlert = (function(_super) {\n  __extends(BankAlert, _super);\n\n  function BankAlert() {\n    _ref = BankAlert.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BankAlert.prototype.url = \"bankalerts\";\n\n  return BankAlert;\n\n})(Backbone.Model);\n","var BankOperation, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BankOperation = (function(_super) {\n  __extends(BankOperation, _super);\n\n  function BankOperation() {\n    _ref = BankOperation.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  return BankOperation;\n\n})(Backbone.Model);\n","var AppView, Router, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nAppView = require('views/app_view');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  return Router;\n\n})(Backbone.Router);\n","var AppView, BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = AppView = (function(_super) {\n  __extends(AppView, _super);\n\n  function AppView() {\n    _ref = AppView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  AppView.prototype.template = require('./templates/app');\n\n  AppView.prototype.el = '#content';\n\n  AppView.prototype.currentAccountId = 1;\n\n  AppView.prototype.accountCount = 0;\n\n  AppView.prototype.afterRender = function() {\n    var thisAppView;\n    console.log('afterrender');\n    thisAppView = this;\n    $('#account-budget-amount').on('keyup', function() {\n      return $(\"#budget\" + thisAppView.currentAccountId).val(parseInt($(this).val()));\n    });\n    return window.collections.banks.fetch({\n      data: {\n        withAccountOnly: true\n      },\n      success: function() {\n        return window.collections.allBanks.fetch({\n          success: function() {\n            var treatment, view;\n            console.log('all bank ok');\n            view = this;\n            treatment = function(bank, callback) {\n              return bank.accounts.fetch({\n                success: function(col, data) {\n                  var account, accountAmount, accountList, accountListItem, accountTitle, bankName, _i, _len, _ref1;\n                  bankName = bank.get('name');\n                  $('#content').append('<div id=\"parameters\" class=\"parameters\"></div>');\n                  $('#parameters').append('<h2>' + bankName + '</h2>');\n                  accountList = $('<ul></ul>');\n                  _ref1 = col.models;\n                  for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n                    account = _ref1[_i];\n                    thisAppView.accountCount++;\n                    accountListItem = $('<li></li>');\n                    accountTitle = account.get('title');\n                    accountAmount = account.get('amount');\n                    accountListItem.append('<input type=\"radio\" id=\"account' + thisAppView.accountCount + '\" name=\"accountTitle\" class=\"accountTitle\" />' + '<label for=\"accountTitle\">' + accountTitle + '</label>');\n                    accountListItem.append(' - Solde : <input type=\"text\" class=\"accountAmount\" value=\"' + accountAmount + '\" disabled=\"true\" />');\n                    accountListItem.append(' - Budget : <input type=\"text\" id=\"budget' + thisAppView.accountCount + '\" class=\"accountBudget\" value=\"0\" /><br />');\n                    accountList.append(accountListItem);\n                  }\n                  $('#parameters').append(accountList);\n                  $('.accountTitle').on('change', function() {\n                    thisAppView.currentAccountId = parseInt($(this).attr('id').replace('account', ''));\n                    $('#account-budget-amount').removeClass();\n                    $('#account-budget-amount').addClass('current' + thisAppView.currentAccountId);\n                    $(\"#account-amount-balance\").text($(this).parent().children('input.accountAmount').val());\n                    return $(\"#account-budget-amount\").val($(this).parent().children('input.accountBudget').val());\n                  });\n                  $('.accountBudget').on('keyup', function() {\n                    if ($(\"#account-budget-amount\").hasClass('current' + parseInt($(this).attr('id').replace('budget', '')))) {\n                      return $(\"#account-budget-amount\").val(parseInt($(this).val()));\n                    }\n                  });\n                  return $('.accountTitle:eq(0)').click();\n                }\n              });\n            };\n            console.log(window.collections.banks.models);\n            async.concat(window.collections.banks.models, treatment, function(err, results) {\n              if (err) {\n                console.log(err);\n                return alert(window.i18n(\"error_loading_accounts\"));\n              }\n            });\n            return Backbone.history.start();\n          },\n          error: function() {\n            console.log(\"Fatal error: could not get the banks list\");\n            return alert(window.i18n(\"fatal_error\"));\n          }\n        });\n      }\n    });\n  };\n\n  return AppView;\n\n})(BaseView);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<p>Contenu</p>');\n}\nreturn buf.join(\"\");\n};"]}